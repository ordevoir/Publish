
Докажем [[Halting Problem|невычислимость функции остановки]] строго, от противного, сведя к противоречию предположение о существовании машины Тьюринга, разрешающую проблему остановки для машин Тьюринга, вычисляющих функции $f:ℕ→ℕ$.

Для доказательства ведем в рассмотрение две специальные машины Тьюринга. 

**Копирующая машина** (*copying machine*) $C$. Если дана пустая лента, на которой записан один блок из $n$ единиц, и машина стартует считывая крайнюю левую единицу, то машина в итоге остановится и на ленте будет записано два блока, разделенных одной пустой клеткой и содержащих по $n$ единиц, а машина будет указывать на крайнюю единицу. Предположим, что состояния машины $C$ пронумерованы от $1$ до $p$. Тогда $q_1$ – стартовое состояние, а $q_p$ – состояние остановки.

**Дрожащая машина** (*dithering machine*) $D$. Стартуя при тех же условиях, что и $C$, дрожащая машина в конечном счете остановится, если $n>1$, но никогда не остановится, если $n=1$. Такая машина описывается последовательностью из двух состояний:

$$
1, 3, 4, 2, 3, 1, 3, 3
$$

или в четверках:

$$
q_10S_0q_3, \, q_11Rq_2, \, q_20Lq_1, \, q_21Lq_3
$$

Стартуя на $1$ в состоянии $1$, машина шагает вправо и переходит в состояние $2$. Если после этого машина оказывается на $1$, головка смещается обратно влево и переходит в состояние остановки $3$. Если же после первой операции машина оказывается на пустой клетке, то она смещается обратно влево и переходит в исходное состояние $1$: машина зацикливается, двигаясь туда-сюда.

Теперь предположим, что у нас есть машина $H$, которая вычисляет функцию остановки $h(m, n)$. Состояния $H$ пронумерованы от $1$ до $k$: $q_1'$ – стартовое состояние, а $q_k'$ – состояние остановки. Комбинируем машины $C$ и $H$ для того, чтобы получить машину, вычисляющую функцию остановки $g(n)$ для машины $M_n$ при входе $n$. Переобозначим номера состояний машины $H$ от $p$ до $r=p-1+k$, уберем штриховку, и запишем их после состояний $q_1, q_2, \ldots, q_{p-1}$, заменив состояние остановки $q_p$ машины $C$ начальным состоянием $q_p'$ машины $H$. Получим машину $CH$, состояния которой пронумерованы от $1$ до $r$ (где $q_r$ – состояние остановки). Программа машины $CH$ представляет собой последовательность четверок программы $C$, вслед за которыми идут четверки программы $H$. Изначально машина $C$ подразумевала остановку при переходе в состояние $p$, но в комбинированной машине переход в состояние $p$ начинает операции машины $H$. Таким образом новые комбинированные инструкции будут сначала проходить через операции машины $C$, копируя входное число $n$, и потом, когда машина $C$ завершит свою часть работы, на ленте будет записано уже два числа $n$, и запустятся операции машины $H$. Машина $CH$ будет вычисляет функцию $g(n) = h(n, n)$. Тем самым, можно сказать, мы произвели диагонализацию: $g(n)$ возвращает $1$ или $2$ в соответствии с тем, останавливается ли машина $M_n$ при входе $n$, т.е. при вычислении функции $f_n(n)$. 

Теперь комбинируем машину $CH$ с машиной $D$, перенумеровав три его состояния в  $r,r+1, r+2$ и записав их после состояния $q_{r-1}$ машины $CH$, заменив состояние остановки $q_r$ стартовым состоянием машины $D$. В результате получим машину $CHD$, которая проходит через операции машины $CH$ и затем через операции машины $D$. Состоянием остановки этой машины будет $q_{r+2}$.

Таким образом, если машина Тьюринга, идущая под номером $n$ (ранее, мы обозначили ее как $M_n$), останавливается, когда стартует со значением $n$, т.е. если $h(n,n)=g(n)=1$, то машина $CHD$ не остановится, если будет стартовать со значением $n$. Если же $M_n$ не останавливается, когда стартует со значением $n$, т.е. если $h(n,n)=g(n)=2$, то машина $CHD$ останавливается (стартуя с $n$).

Покажем, что такая машина как $CHD$ не может существовать. Пусть $m$ – номер машины $CHD$, т.е. имеем дело с машиной $M_m$ (ей соответствует функция $f_m$). Что произойдет, если запустить эту машину со стартовым значением $m$ (вычислить $f_m(m)$)? Машина $CHD$ остановится в том и только в том случае, если машина $M_m$ (т.е. она же сама) *не* остановится, стартуя со значением $m$. Машины $C$ и $D$ заведомо существуют. Противоречивость в существовании машины $CHD$ показывает, что не может быть такой машины как $H$.
