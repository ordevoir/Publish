
При выполнении [[Affine Mapping|аффинных преобразований]] удобней перейти к однородной системе координат (*homogeneous coordinates* or *projective coordinates*). Это позволит избавиться от вектора перемещения и представить аффинное преобразование в виде матричного оператора. 

Операция перемещения в $d$-мерном векторном пространстве $V$ не является [[Linear mapping|линейным преобразованием]], и не может быть представлена в виде матричного оператора $d×d$ (как и аффинное преобразование). Однако, эти преобразования можно произвести в расширенном векторном пространстве $\widetilde V$ размерности $(d+1)$, используя матричный оператор с формой $(d+1)×(d+1)$. Каждой вектор $\mathbf{v}∈V$ представляется как $(\mathbf{v}, 1)∈ \widetilde V$. Само пространство $V$ и все $d$-мерные аффинные подпространства являются гиперплоскостями в $\widetilde V$.

Пусть аффинное преобразование $\phi: V→V$ состоит из операции линейного преобразования, представленного матрицей $M$, и сдвига на вектор $\mathbf a$. Тогда выражение для преобразования можно записать как $\mathbf{x}' = M \mathbf x + \mathbf a$. Если $V$ – $d$-мерное векторное пространство, то $\mathbf x$ и $\mathbf a$ – векторы размерности $d$, а $M$ – матрица $d \times d$.

При переходе к однородным координатам, каждой вектор $\mathbf{x}∈V$ представляется как $(\mathbf{x}, 1)∈ \widetilde V$. Аффинное преобразование $\phi$, действующее на $V$, записывается в однородных координатах в виде матрицы

$$
M^○ = 
\begin{pmatrix}
M & \mathbf{a} \\
0 & 1 \\
\end{pmatrix} = 
\begin{pmatrix}
    m_{11} & \ldots & m_{1d} & a_1      \\
    \vdots &        & \vdots &  \vdots  \\
    m_{d1} & \ldots & m_{dd} & a_d      \\
    0      & \ldots & 0      & 1      \\
\end{pmatrix}
$$

Обозначим через $\mathbf{w}$ вектор $(\mathbf{x}, 1) = (x_1, \ldots, x_d, 1)$. Тогда, в результате умножения матрицы $M^○$ на вектор $\mathbf{w}∈\widetilde V$ получим вектор $\mathbf{w}'∈\widetilde V$

$$
\mathbf{w}' = M^○\mathbf{w}
$$

Вектор $\mathbf{w}'$ представляет собой представление вектора $\mathbf{x}'$, который является результатом аффинного преобразования $\phi$, в однородных координатах: $\mathbf w'=(x'_1,\ldots,x'_d,1) = (\mathbf{x}', 1)$. 

>[!code]- Код с применением матриц преобразования
>![[linear_mapping.ipynb]] 
>![[affine_mapping.ipynb]] 

>[!example]- Video
>![[TransformScene.mp4]]

>[!detail] 
Заметим, что если убрать из матрицы $M^\circ$ последнюю строку, то произведение такой матрицы с размерностью $d \times (d+1)$ и вектора $\mathbf w$ образует вектор, размерности $d$, и это будет вектор $\mathbf x'$. Последняя строка матрицы $M^\circ$ позволяет нам оставаться в однородных координатах после преобразований, что представить композицию аффинных преобразований как матричные произведения в $\widetilde V$. 





