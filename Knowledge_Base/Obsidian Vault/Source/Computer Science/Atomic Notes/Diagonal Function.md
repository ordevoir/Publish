
[[Godel Numbering of Turing Machines|Геделева нумерация машин Тьюринга]] позволяет продемонстрировать пример [[Uncomputability of Functions|невычислимой по Тьюрингу функции]] путем самореферентности. Определим **диагональную функцию** (*diagonal function*):

$$

d(n) =

\begin{cases}

2 & \text{if }f_n(n) \text{ is defined and} = 1 \\

1 & \text{otherwise}

\end{cases}

$$

Можно представить, что мы бежим по диагонали [[Uncomputability of Functions|таблицы]] и функция $d$ возвращает $2$ если значение ячейки $1$ и возвращает $1$ в противном случае.

Очевидно, что $d$ [[Domain Total Partial Function|всюду определена]] на $\mathbb N$, однако она не вычислима по Тьюрингу: $d$ не совпадает ни с одной функцией $f_1, f_2, f_3, \ldots$, которые соответствуют машинам Тьюринга $M_1, M_2, M_3, \ldots$

>[!theorem] 
> Диагональная функция $d$ невычислима по Тьюрингу.
> 
> **Доказательство**
> 
> Предположим, что $d$ – одна из вычислимых по Тьюрингу функций, скажем $f_m$. Тогда, для каждого натурального числа $n$, $d(n)$ так и $f_m(n)$ возвращают одно и то же число (либо не определены при $n$). Рассмотрим случай $n=m$:
> 
> $$
> 
> f_m(m) = d(m) =
> 
> \begin{cases}
> 
> 2 & \text{if }f_m(m) \text{ is defined and} = 1 \\
> 
> 1 & \text{otherwise}
> 
> \end{cases}
> 
> $$
> 
> Возникает противоречие: если $f_m(m)$ не определена, то она определена и равна $1$, если же она определена, но не равна $1$, то она равна единице, а если она определена и равна $1$, то она равна $2$. Так как предположение, что функция $d$ появляется в списке $f_1, f_2, \ldots, f_m, \ldots$, приводит к противоречию, мы можем заключить, что предположение о вычислимости $d$ по Тьюрингу ложное. 

>[!addition]- Сведение вычислимости $d$ к проблеме остановки
> Согласно тезису Тьюринга, так как $d$ не вычислима по Тьюрингу, она является невычислимой в принципе. Почему? Несмотря на то, что не существует машины Тьюринга, которая могла бы вычислить $d$, мы по крайней мере можем вычислить несколько его первых значений. Как мы выше отмечали функции $f_1, f_2, f_3$, являются пустыми функциями, поэтому $d(1) = d(2) = d(3) = 1$. Может показаться, что мы действительно можем вычислить $d(n)$ для любого натурального числа $n$, если мы не ограничены по времени.
> 
> Конечно, мы можем теоретически рассчитать, какую последовательность четвёрок определяет машина $M_n$, выяснив, какое натуральное число ему соответствует и произведя разложение на простые множители. Однако в практическом плане это может оказаться невозможным для больших $n$, так как это потребует огромного времени вычисления. Но предположим, что мы не ограничены во времени.
> 
> Также не сложно будет следовать операциям, определенным машиной $M_n$, если определена начальная конфигурация, и если $M_n$ в итоге остановится, то мы об этом узнаем. Таким образом если мы запустим машину $M_n$ с входным значением $n$ и она остановится, то мы можем увидеть, остановилась ли она в нестандартной конфигурации, оставив $f_n(n)$ неопределенной, или остановится в стандартной конфигурации с выходным значением $f_n(n) = 1$ или же со значением $f_n(n) \neq 1$. Из этого мы сделаем вывод $d(n)=1$ или $d(n)=2$.
> 
> Но возможен и еще один случай, при котором $d(n)=1$, а именно, если $M_n$ никогда не завершится. Если при заданной начальной конфигурации $M_n$ никогда не завершится, то как мы можем это выяснить за конечное время? Это существенный вопрос: определить, остановится ли когда-нибудь или нет машина $M_n$, которая стартует считывая крайнюю левую не пустую клетку сплошного блока единиц на ленте (и пустой в остальных областях). Таким образом вычислимость диагональной функции сводится к [[Halting Problem|проблеме остановки]]: является ли вычислимой функция $h(n)$, которая возвращает $1$, если машина Тьюринга $M_n$ завершится при входе $n$, и возвращает $0$, если она будет работать бесконечно. Если такая функция является вычислимой, то вычислимо и $d$, что противоречит тезису Тьюринга: это значит, что существуют вычислимые функции, которые не входят в $f_1, f_2, f_3, \ldots$

